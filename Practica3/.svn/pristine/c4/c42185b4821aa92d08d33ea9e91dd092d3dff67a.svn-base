import java.util.concurrent.ArrayBlockingQueue;
import java.util.concurrent.BlockingQueue;
import java.util.concurrent.TimeUnit;

public class main {
	private static final int FIFO_MAX_SIZE = 25;
	static private String entrada=null;
	static private String salida=null;
	static private int hilos=-1;
	public static void main(String[] args) {
		// TODO Auto-generated method stub
		setParams(args);
		BlockingQueue<String> CTE = new ArrayBlockingQueue<String>(FIFO_MAX_SIZE);
		BlockingQueue<String> CE = new ArrayBlockingQueue<String>(FIFO_MAX_SIZE);
		
		Generador genTareas;
		Distribuidor distribuidor;
		genTareas = new Generador(entrada, CTE, assign_id());
		distribuidor = new Distribuidor(CTE, assign_id());
		genTareas.run();
		distribuidor.run();
		try {
			TimeUnit.SECONDS.sleep(60);
		} catch (InterruptedException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		
		
		
		
	}
	private static int assign_id() {
		hilos=hilos+1;
		return hilos;
	}
	private static void setParams(String[] args) {
		if(args.length !=2) {
			System.err.println("Se requieren 2 parametros, fichero_entrada, fichero_salida");
			return;
		}
		entrada=args[0];
		salida=args[1];
	}

}
